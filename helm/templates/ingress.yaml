{{- if .Values.ingress.enabled }}
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
name: {{ include "learnerreport.fullname" . }}-ingress
labels:
{{- include "learnerreport.labels" . | nindent 4 }}
annotations:
{{- if .Values.ingress.className }}
kubernetes.io/ingress.class: {{ .Values.ingress.className | quote }}
{{- end }}
{{- range $k, $v := .Values.ingress.annotations }}
{{ $k }}: {{ $v | quote }}
{{- end }}
spec:
{{- if .Values.ingress.tls.enabled }}
tls:
- hosts:
- {{ .Values.ingress.host | quote }}
secretName: {{ .Values.ingress.tls.secretName | quote }}
{{- end }}
rules:
http:
paths:
- path: /
pathType: Prefix
backend:
service:
name: {{ include "learnerreport.fullname" . }}-frontend-svc
port:
number: {{ .Values.service.frontend.port }}
- path: /api
pathType: Prefix
backend:
service:
name: {{ include "learnerreport.fullname" . }}-backend-svc
port:
number: {{ .Values.service.backend.port }}
{{- end }}